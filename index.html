<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>360 Photo Viewer</title>
    <meta name="description" content="360 Photo Viewer for Quest">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- A-Frame for WebVR/WebAR -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- A-Frame extras for controls -->
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <div id="loading-screen">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading...</div>
        </div>
    </div>

    <a-scene embedded style="height: 100vh; width: 100vw;" 
             vr-mode-ui="enabled: true" 
             device-orientation-permission-ui="enabled: false"
             background="color: #000000"
             loading-screen="dotsColor: red; backgroundColor: black"
             renderer="antialias: false; colorManagement: true; sortObjects: true; physicallyCorrectLights: false; maxCanvasWidth: 1920; maxCanvasHeight: 1080"
             webxr="requiredFeatures: local-floor; optionalFeatures: bounded-floor, hand-tracking">
        
        <a-assets>
            <!-- Dynamic image loading will be handled by JavaScript -->
            <img id="arrow-texture" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik01MCA1TDkwIDUwSDcwVjk1SDMwVjUwSDEwTDUwIDVaIiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjwvc3ZnPgo=" />
        </a-assets>

        <!-- 360 Photo Sphere -->
        <a-sky id="skybox" src="#current-image" rotation="0 0 0"></a-sky>
        
        <!-- Navigation Arrows -->
        <a-entity id="navigation-arrows"></a-entity>
        
        <!-- Camera with Quest-optimized settings -->
        <a-entity id="camera" 
                  camera="fov: 80; near: 0.1; far: 1000" 
                  position="0 1.6 0" 
                  look-controls="reverseMouseDrag: false; touchEnabled: true; magicWindowTrackingEnabled: true; pointerLockEnabled: false"
                  wasd-controls="enabled: false"
                  cursor="rayOrigin: mouse; fuse: false">
        </a-entity>
        
        <!-- Debug info for touch events -->
        <a-entity id="debug-info" position="0 -0.5 -2" text="value: Touch debug info; color: white; align: center; width: 2;"></a-entity>
    </a-scene>

    <div id="info-panel">
        <div id="location-info">Current Location: <span id="current-location">Loading...</span></div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/main.js"></script>
</body>
</html>